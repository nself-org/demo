# Basic Rate Limiting Configuration
limit_req_zone $binary_remote_addr zone=general:10m rate=10r/s;
limit_req_zone $binary_remote_addr zone=graphql_api:10m rate=100r/m;
limit_req_zone $binary_remote_addr zone=auth:10m rate=10r/m;
limit_req_zone $binary_remote_addr zone=uploads:10m rate=5r/m;
limit_req_zone $binary_remote_addr zone=static:10m rate=1000r/m;
limit_req_zone $binary_remote_addr zone=webhooks:10m rate=30r/m;
limit_req_zone $binary_remote_addr zone=functions:10m rate=50r/m;
limit_req_zone $http_authorization zone=user_api:10m rate=1000r/m;

# Connection limits
limit_conn_zone $binary_remote_addr zone=conn_limit_per_ip:10m;
limit_conn_zone $server_name zone=conn_limit_server:10m;

# Rate limit status
limit_req_status 429;
limit_conn_status 429;
